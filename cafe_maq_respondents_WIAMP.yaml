# Wisconsin-Madison
# csv filename: CAFE+Questionnaire+v.2+-+Physio+Study+(WI-AMP-BTV)_February+6,+2019_09.01 - CHOICE TEXT.csv


entityDefinitions:
  respondent:
    fqn: "general.person"
    entitySetName: "CAFE_MAQ_Respondents"
    propertyDefinitions:
      nc.SubjectIdentification:
        type: "nc.SubjectIdentification"
        column: "ResponseId"
      # ol.idnumber:
      #   type: "ol.idnumber"
      #   column: "ResponseId" #not sure if this or Person ID should be PK.
      nc.PersonGivenName:
        type: "nc.PersonGivenName"
        column: "RecipientFirstName"
      nc.PersonSurName:
        type: "nc.PersonSurName"
        column: "RecipientLastName"
      nc.PersonRace1:
        type: "nc.PersonRace"
        column: "Q4_1"
        # transforms:
        # - !<transforms.ReplaceTransform>
        #   target: ["1"]
        #   goal: ["amindian"]
        #   partial: true
      nc.PersonRace2:
        type: "nc.PersonRace"
        column: "Q4_2"
        # transforms:
        # - !<transforms.ReplaceTransform>
        #   target: ["1"]
        #   goal: ["asian"]
        #   partial: true
      nc.PersonRace3:
        type: "nc.PersonRace"
        column: "Q4_3"
        # transforms:
        # - !<transforms.ReplaceTransform>
        #   target: ["1"]
        #   goal: ["black"]
        #   partial: true
      nc.PersonRace4:
        type: "nc.PersonRace"
        column: "Q4_4"
        # transforms:
        # - !<transforms.ReplaceTransform>
        #   target: ["1"]
        #   goal: ["white"]
        #   partial: true
      nc.PersonRace5:
        type: "nc.PersonRace"
        column: "Q4_8"
        # transforms:
        # - !<transforms.ReplaceTransform>
        #   target: ["1"]
        #   goal: ["other"]
        #   partial: true
      nc.PersonRace6:
        type: "nc.PersonRace"
        column: "Q4_6"
        # transforms:
        # - !<transforms.ReplaceTransform>
        #   target: ["1"]
        #   goal: ["Don't Know"]
        #   partial: true
      nc.PersonRace7:
        type: "nc.PersonRace"
        column: "Q4_7"
        # transforms:
        # - !<transforms.ReplaceTransform>
        #   target: ["1"]
        #   goal: ["Prefer not to answer"]
        #   partial: true
      nc.PersonRace8:
        type: "nc.PersonRace"
        column: "Q4_8_TEXT"
      nc.PersonEthnicity:
        type: "nc.PersonEthnicity"
        # Are you of Hispanic, Latino, or Spanish origin?
        column: "Q3"
        # transforms:
        # - !<transforms.ReplaceTransform>
        #   target: ["1", "2"]
        #   goal: ["hispanic", "nonhispanic"]
      nc.PersonBirthPlace:
        type: "nc.PersonBirthPlace"
        column: "Q5"
    name: "respondent"

  respondentdetails:
    fqn: "ol.persondetails"
    entitySetName: "CAFE_MAQ_RespondentDetails"
    propertyDefinitions:
      general.id:
        type: "general.id"
        column: "respondent_id"
      ol.language:
        type: "ol.language"
        column: "UserLanguage"
      person.ageatevent:
        type: "person.ageatevent"
        column: "Q2"
        transforms:
        - !<transforms.ParseIntTransform> {}
      person.maritalstatus:
        type: "person.maritalstatus"
        column: "Q7"
        # transforms:
        # - !<transforms.ReplaceTransform>
        #   target: ["1", "2", "3"]
        #   goal: ["Not Married", "Married", "Live-in Partner"] #not sure of this order of what is what.
      ol.nationality:
        type: "ol.nationality"
        column: "Q5" #Where were you born
      ol.numberofchildren:
        type: "ol.numberofchildren"
        column: "Q13"
    name: "respondentdetails"


  immigrationstatus:
    fqn: "ol.immigrationstatus"
    entitySetName: "CAFE_MAQ_ImmigrationStatus"
    propertyDefinitions:
      ol.id:
        type: "ol.id"
        column: "ResponseId"
      ol.status:
        type: "ol.status"
        column: "Q6"
      ol.description:
        type: "ol.description"
        column: "Q5"
    conditions:
    - !<conditions.BooleanIsNullCondition>
      column: "Q6"
      reverse: true
    name: "immigrationstatus"

  employment:
    fqn: "ol.employment"
    entitySetName: "CAFE_MAQ_Employment"
    propertyDefinitions:
      ol.id:
        type: "ol.id"
        column: "ResponseId"
      ol.status:
        type: "ol.status"
        column: "Q10"
    conditions:
    - !<conditions.BooleanIsNullCondition>
      column: "Q10"
      reverse: true
    name: "employment"

  incomerange:
    fqn: "ol.income"
    entitySetName: "CAFE_MAQ_Incomes"
    propertyDefinitions:
      ol.id:
        type: "ol.id"
        column: "ResponseId"
      ol.type:
        type: "ol.type"
        column: "Q11"
      # In which of these ranges does your familyâ€™s yearly income before taxes for 2016 fall?
      # ol.value:
      #   type: "ol.value"
      #   transforms:
      #   - !<transforms.ReplaceTransform>
      #     target: []
      #     goal: []
      # ol.minimumvalue:
      #   type: "ol.minimumvalue"
      #   transforms:
      #   - !<transforms.ReplaceTransform>
      #     target: []
      #     goal: []
      # ol.maximumvalue:
      #   type: "ol.maximumvalue"
      #   transforms:
      #   - !<transforms.ReplaceTransform>
      #     target: []
      #     goal: []
      # ol.qualifier:
      #   type: "ol.qualifier"
      #   transforms:
      #   - !<transforms.ReplaceTransform>
      #     target: []
      #     goal: []
    conditions:
    - !<conditions.BooleanIsNullCondition>
      column: "Q11"
      reverse: true
    name: "incomerange"

  publicassistance:
    fqn: "ol.income"
    entitySetName: "CAFE_MAQ_Incomes"
      # Do you receive public assistance (WIC, SNAP, etc.), or have you received public assistance in the last year?
    propertyDefinitions:
      ol.id:
        type: "ol.id"
        column: "ResponseId"
      ol.notes:
        type: "ol.notes"
        transforms:
        - !<transforms.ValueTransform>
          value: "public assistance"
      ol.type:
        type: "ol.type"
        column: "Q12"
        # transforms:
        # - !<transforms.ReplaceTransform>
        #   target: ["1", "2"]
        #   goal: ["Yes", "No"] #not sure how the data will look. i think 1 = yes
    conditions:
    - !<conditions.BooleanIsNullCondition>
      column: "Q12"
      reverse: true
    name: "publicassistance"

  education:
    fqn: "ol.education"
    entitySetName: "CAFE_MAQ_Education"
    propertyDefinitions:
      ol.id:
        type: "ol.id"
        column: "ResponseId"
      person.highesteducation:
        type: "person.highesteducation"
        column: "Q9"
    conditions:
    - !<conditions.BooleanIsNullCondition>
      column: "Q9"
      reverse: true
    name: "education"

associationDefinitions:
  has:
    fqn: "ol.has"
    entitySetName: CAFE_MAQ_Has
    src: "respondent"
    dst: "respondentdetails"
    propertyDefinitions:
      ol.id:
        type: "ol.id"
        transforms:
        - !<transforms.ConcatTransform>
          columns: ["ResponseId", "respondent_id"]
          separator: "_"
    name: "has"

  reported1:
    fqn: "ol.reported"
    entitySetName: CAFE_MAQ_Reported
    src: "respondent"
    dst: "employment"
    propertyDefinitions:
      general.id:
        type: "general.id"
        transforms:
        - !<transforms.ConcatTransform>
          columns: ["ResponseId", "RecordedDate"]
          separator: "_"
    name: "reported1"

  reported2:
    fqn: "ol.reported"
    entitySetName: CAFE_MAQ_Reported
    src: "respondent"
    dst: "education"
    propertyDefinitions:
      general.id:
        type: "general.id"
        transforms:
        - !<transforms.ConcatTransform>
          columns: ["ResponseId", "RecordedDate"]
          separator: "_"
    name: "reported2"

  reported3:
    fqn: "ol.reported"
    entitySetName: CAFE_MAQ_Reported
    src: "respondent"
    dst: "incomerange"
    propertyDefinitions:
      general.id:
        type: "general.id"
        transforms:
        - !<transforms.ConcatTransform>
          columns: ["ResponseId", "RecordedDate"]
          separator: "_"
    name: "reported3"

  reported4:
    fqn: "ol.reported"
    entitySetName: CAFE_MAQ_Reported
    src: "respondent"
    dst: "publicassistance"
    propertyDefinitions:
      general.id:
        type: "general.id"
        transforms:
        - !<transforms.ConcatTransform>
          columns: ["ResponseId", "RecordedDate"]
          separator: "_"
    name: "reported4"

  reported5:
    fqn: "ol.reported"
    entitySetName: CAFE_MAQ_Reported
    src: "respondent"
    dst: "immigrationstatus"
    propertyDefinitions:
      general.id:
        type: "general.id"
        transforms:
        - !<transforms.ConcatTransform>
          columns: ["ResponseId", "RecordedDate"]
          separator: "_"
    name: "reported5"
